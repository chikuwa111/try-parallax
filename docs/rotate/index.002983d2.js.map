{"mappings":"IAkCqCA,EAAAA,EChChB,CACnB,eAAgB,CACdC,UAAYC,GAAe,UAAeA,EAAU,mBDJtBC,GAChCC,OAAOC,iBAAiB,oBAAkB,KACxCF,EAAQC,OAAOF,YASjB,IAAII,EAA0B,EAC1BC,GAAU,EAEdH,OAAOC,iBAAiB,UAAQ,KAC9BC,EAA0BF,OAAOF,QAE5BK,IACHH,OAAOI,uBAAqB,KAC1BL,EAAQG,GACRC,GAAU,KAGZA,GAAU,MAYdE,EAAmBP,IACjBQ,OAAOC,QAAQX,GAAcY,SAAO,EAAGC,EAAUC,MAE7CC,SAASC,iBAAiBH,GACnBD,SAASK,IAChBP,OAAOC,QAAQG,GAAQF,SAAO,EAAGM,EAAUC,MACzCF,EAAQG,MAAMF,GAAYC,EAAOjB","sources":["src/util.ts","src/rotate/script.ts"],"sourcesContent":["export function registerAnimation(animate: (scrollY: number) => void) {\n  window.addEventListener(\"DOMContentLoaded\", () => {\n    animate(window.scrollY);\n  });\n\n  /* \n  Reference: \n    https://developer.mozilla.org/ja/docs/Web/API/Document/scroll_event,\n    https://www.html5rocks.com/en/tutorials/speed/animations/\n  */\n\n  let lastKnownScrollPosition = 0;\n  let ticking = false;\n\n  window.addEventListener(\"scroll\", () => {\n    lastKnownScrollPosition = window.scrollY;\n\n    if (!ticking) {\n      window.requestAnimationFrame(() => {\n        animate(lastKnownScrollPosition);\n        ticking = false;\n      });\n\n      ticking = true;\n    }\n  });\n}\n\nexport type AnimationMap = {\n  [selector: string]: {\n    [cssProperty: string]: (scrollY: number) => string;\n  }\n};\n\nexport function registerAnimationMap(animationMap: AnimationMap) {\n  registerAnimation((scrollY: number) => {\n    Object.entries(animationMap).forEach(([selector, styles]) => {\n      const elements: NodeListOf<HTMLElement> =\n        document.querySelectorAll(selector);\n      elements.forEach((element) => {\n        Object.entries(styles).forEach(([property, update]) => {\n          element.style[property] = update(scrollY);\n        });\n      });\n    });\n  });\n}\n","import { registerAnimationMap } from \"../util\";\n\nregisterAnimationMap({\n  \"#rotate-text\": {\n    transform: (scrollY: number) => `rotate(${scrollY / 5}deg)`\n  }\n});\n"],"names":["animationMap","transform","scrollY","animate","window","addEventListener","lastKnownScrollPosition","ticking","requestAnimationFrame","$13e4ad5bec492e93$export$880334fa0ca26bd3","Object","entries","forEach","selector","styles","document","querySelectorAll","element","property","update","style"],"version":3,"file":"index.002983d2.js.map"}